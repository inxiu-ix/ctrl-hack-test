(function(){"use strict";var t={146:function(t,a,e){var o=e(144),n=function(){var t=this,a=t._self._c;return a("div",{attrs:{id:"app"}},[a("calculation-form"),a("calculation-form-vuex")],1)},u=[],s=function(){var t=this,a=t._self._c;return a("div",{staticClass:"container"},[a("div",{staticClass:"form"},[t._l(t.formInputs,(function(e){return a("div",{key:e.id,staticClass:"form-item"},[a("input",{attrs:{placeholder:e.slug,type:"number"},domProps:{value:t.formData[e.slug]},on:{input:function(a){return t.calculate(a,e.slug)}}}),a("span",{staticClass:"form-label"},[t._v(t._s(e.slug)+":"+t._s(t.formData[e.slug]))])])})),a("div",{staticClass:"button-container"},[a("button",{on:{click:t.submit}},[t._v("Submit")]),a("span",{staticClass:"form-label"},[t._v("Current Storage:")]),a("span",[t._v(" "+t._s(t.storage)+" ")])])],2),t.logs.length?a("div",{staticClass:"logs"},t._l(t.logs,(function(e){return a("div",{key:e.id,staticClass:"logs-item"},[t._v(t._s(e.text))])})),0):t._e()])},r=[],i=e(486),c={calculatePrice:t=>{const a=t.amount/t.qty;return isFinite(a)&&a!==t.price?a:t.price},calculateQty:t=>{const a=t.amount/t.price;return isFinite(a)&&a!==t.qty?a:t.qty},calculateAmount:t=>{const a=t.price*t.qty;return isFinite(a)&&a!==t.amount?a:t.amount}},l=e(632);function f(t){const a={text:t,id:(0,l.Z)()};return a}var m=f;class p{save(t,a){localStorage.setItem(t,JSON.stringify(a))}fetch(t){const a=localStorage.getItem(t);return a}}const g=new p;var h=g,d={data(){return{formInputs:[{id:1,slug:"price"},{id:2,slug:"qty"},{id:3,slug:"amount"}],formData:{price:0,qty:0,amount:0},nonce:0,inputQueue:["price","qty","amount"],logs:[],storage:"Пусто"}},created(){this.initStorage()},watch:{"formData.price":function(t){this.pushToLog(`Поле price изменилось на ${t}`)},"formData.qty":function(t){this.pushToLog(`Поле qty изменилось на ${t}`)},"formData.amount":function(t){this.pushToLog(`Поле amount изменилось на ${t}`)}},methods:{calculate:(0,i.debounce)((function(t,a){const e=this.inputQueue.indexOf(a);switch(e&&(this.inputQueue.splice(e,1),this.inputQueue.unshift(a)),this.formData[a]=+t.target.value,this.inputQueue[2]){case"price":this.formData.price=c.calculatePrice(this.formData);break;case"qty":this.formData.qty=c.calculateQty(this.formData);break;case"amount":this.formData.amount=c.calculateAmount(this.formData);break}}),300),submit(){this.formData.amount%2===0?setTimeout((()=>{this.nonce++;const t={...this.formData,nonce:this.nonce};h.save("calculationStorage",t),this.storage=h.fetch("calculationStorage"),this.pushToLog("Данные успешно сохранены. Текущее состояние обновлено!")}),1e3):this.pushToLog("Ошибка. amount нечетное число. Даннные не сохранены")},initStorage(){const t=h.fetch("calculationStorage");t&&(this.storage=t,this.nonce=JSON.parse(t).nonce)},pushToLog(t){const a=m(t);this.logs.unshift(a)}}},v=d,b=e(1),y=(0,b.Z)(v,s,r,!1,null,null,null),_=y.exports,D=function(){var t=this,a=t._self._c;return a("div",[a("h3",[t._v(" Form vuex ")]),a("div",{staticClass:"container"},[a("div",{staticClass:"form"},[t._l(t.formInputs,(function(e){return a("div",{key:e.id,staticClass:"form-item"},[a("input",{attrs:{placeholder:e.slug,type:"number"},domProps:{value:t.formData[e.slug]},on:{input:function(a){return t.initCalculate(a,e.slug)}}}),a("span",{staticClass:"form-label"},[t._v(t._s(e.slug)+":"+t._s(t.formData[e.slug]))])])})),a("div",{staticClass:"button-container"},[a("button",{on:{click:t.submit}},[t._v("Submit")]),a("span",{staticClass:"form-label"},[t._v("Current Storage:")]),a("span",[t._v(" "+t._s(t.storage)+" ")])])],2),t.logs.length?a("div",{staticClass:"logs"},t._l(t.logs,(function(e){return a("div",{key:e.id,staticClass:"logs-item"},[t._v(t._s(e.text))])})),0):t._e()])])},S=[],C=e(629),x={data(){return{formInputs:[{id:1,slug:"price"},{id:2,slug:"qty"},{id:3,slug:"amount"}]}},computed:{...(0,C.Se)(["formData","logs","storage"])},created(){this.initStorage()},watch:{"formData.price":function(t){this.pushToLog(`Поле price изменилось на ${t}`)},"formData.qty":function(t){this.pushToLog(`Поле qty изменилось на ${t}`)},"formData.amount":function(t){this.pushToLog(`Поле amount изменилось на ${t}`)}},methods:{...(0,C.nv)(["calculate","submit"]),...(0,C.OI)(["updateStorage","updateNonce","pushToLog"]),initCalculate:(0,i.debounce)((function(t,a){const e=+t.target.value;this.calculate({value:e,slug:a})}),300),initStorage(){const t=h.fetch("calculateStorageVuex");t&&(this.updateStorage(t),this.updateNonce(JSON.parse(t).nonce))}}},k=x,q=(0,b.Z)(k,D,S,!1,null,null,null),T=q.exports,O={name:"App",components:{CalculationForm:_,CalculationFormVuex:T}},Q=O,w=(0,b.Z)(Q,n,u,!1,null,null,null),P=w.exports,L={state:{formData:{price:0,qty:0,amount:0},nonce:0,inputQueue:["price","qty","amount"],logs:[],storage:"Пусто"},actions:{calculate({state:t,commit:a},{value:e,slug:o}){const n=t.inputQueue.indexOf(o);switch(n&&a("updateQueue",{idx:n,slug:o}),a("updateFormValue",{slug:o,value:e}),t.inputQueue[2]){case"price":a("calculatePrice");break;case"qty":a("calculateQty");break;case"amount":a("calculateAmount");break}},submit({state:t,commit:a}){t.formData.amount%2===0?setTimeout((()=>{a("incrementNonce");const e={...t.formData,nonce:t.nonce};h.save("calculateStorageVuex",e);const o=h.fetch("calculateStorageVuex");a("updateStorage",o),a("pushToLog","Данные успешно сохранены. Текущее состояние обновлено!")}),1e3):a("pushToLog","Ошибка. amount нечетное число. Даннные не сохранены")}},mutations:{updateQueue(t,{idx:a,slug:e}){t.inputQueue.splice(a,1),t.inputQueue.unshift(e)},calculatePrice(t){const a=c.calculatePrice(t.formData);t.formData.price=a},calculateQty(t){const a=c.calculateQty(t.formData);t.formData.qty=a},calculateAmount(t){const a=c.calculateAmount(t.formData);t.formData.amount=a},pushToLog(t,a){const e=m(a);t.logs.unshift(e)},incrementNonce(t){t.nonce++},updateStorage(t,a){t.storage=a},updateNonce(t,a){t.nonce=a},updateFormValue(t,{slug:a,value:e}){t.formData[a]=e}},getters:{formData:t=>t.formData,logs:t=>t.logs,storage:t=>t.storage}};o.ZP.use(C.ZP);var F=new C.ZP.Store({modules:{calculateForm:L}});o.ZP.config.productionTip=!1,new o.ZP({store:F,render:t=>t(P)}).$mount("#app")}},a={};function e(o){var n=a[o];if(void 0!==n)return n.exports;var u=a[o]={id:o,loaded:!1,exports:{}};return t[o].call(u.exports,u,u.exports,e),u.loaded=!0,u.exports}e.m=t,function(){var t=[];e.O=function(a,o,n,u){if(!o){var s=1/0;for(l=0;l<t.length;l++){o=t[l][0],n=t[l][1],u=t[l][2];for(var r=!0,i=0;i<o.length;i++)(!1&u||s>=u)&&Object.keys(e.O).every((function(t){return e.O[t](o[i])}))?o.splice(i--,1):(r=!1,u<s&&(s=u));if(r){t.splice(l--,1);var c=n();void 0!==c&&(a=c)}}return a}u=u||0;for(var l=t.length;l>0&&t[l-1][2]>u;l--)t[l]=t[l-1];t[l]=[o,n,u]}}(),function(){e.d=function(t,a){for(var o in a)e.o(a,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:a[o]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)}}(),function(){e.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={143:0};e.O.j=function(a){return 0===t[a]};var a=function(a,o){var n,u,s=o[0],r=o[1],i=o[2],c=0;if(s.some((function(a){return 0!==t[a]}))){for(n in r)e.o(r,n)&&(e.m[n]=r[n]);if(i)var l=i(e)}for(a&&a(o);c<s.length;c++)u=s[c],e.o(t,u)&&t[u]&&t[u][0](),t[u]=0;return e.O(l)},o=self["webpackChunkctrl_hack_2"]=self["webpackChunkctrl_hack_2"]||[];o.forEach(a.bind(null,0)),o.push=a.bind(null,o.push.bind(o))}();var o=e.O(void 0,[998],(function(){return e(146)}));o=e.O(o)})();
//# sourceMappingURL=app.113c56d6.js.map